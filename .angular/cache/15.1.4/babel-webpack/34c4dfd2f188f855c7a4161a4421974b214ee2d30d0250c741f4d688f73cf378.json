{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@ionic/angular\";\nconst _c0 = function (a0) {\n  return {\n    \"rating-selected\": a0\n  };\n};\nfunction RatingComponent_i_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 12);\n    i0.ɵɵlistener(\"click\", function RatingComponent_i_8_Template_i_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const option_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.changeRating(option_r3.value));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(option_r3.class);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, option_r3.value === ctx_r0.rating.value));\n  }\n}\nfunction RatingComponent_small_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 13);\n    i0.ɵɵtext(1, \"none\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RatingComponent_small_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 14);\n    i0.ɵɵtext(1, \" El comentario es \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"requerido\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let RatingComponent = /*#__PURE__*/(() => {\n  class RatingComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.ratingOptions = [{\n        class: 'fas fa-angry',\n        value: 1\n      }, {\n        class: 'fas fa-frown',\n        value: 2\n      }, {\n        class: 'fas fa-meh',\n        value: 3\n      }, {\n        class: 'fas fa-smile',\n        value: 4\n      }, {\n        class: 'fas fa-grin-beam',\n        value: 5\n      }];\n      this.rate = new EventEmitter();\n    }\n    ngOnInit() {\n      // Inicializar formulario\n      this.initForm();\n      // Si hay data (actualización de la calificación) ya sea de película o libro\n      if (this.data) {\n        this.ratingForm.patchValue(this.data);\n      }\n    }\n    initForm() {\n      this.ratingForm = this.fb.group({\n        rating: [0, [Validators.min(1), Validators.max(5)]],\n        comment: ['', Validators.required]\n      });\n    }\n    changeRating(rating) {\n      this.rating.setValue(rating);\n    }\n    // Submit para el formulario\n    submit() {\n      if (this.ratingForm.valid) {\n        this.rate.emit(this.ratingForm.value);\n      }\n    }\n    // Getters\n    get rating() {\n      return this.ratingForm.get('rating');\n    }\n    get comment() {\n      return this.ratingForm.get('comment');\n    }\n  }\n  RatingComponent.ɵfac = function RatingComponent_Factory(t) {\n    return new (t || RatingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n  RatingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RatingComponent,\n    selectors: [[\"app-rating\"]],\n    inputs: {\n      data: \"data\"\n    },\n    outputs: {\n      rate: \"rate\"\n    },\n    decls: 20,\n    vars: 6,\n    consts: [[3, \"formGroup\", \"ngSubmit\"], [\"lines\", \"none\"], [\"position\", \"stacked\"], [3, \"class\", \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"position\", \"floating\"], [\"formControlName\", \"comment\"], [1, \"ion-text-start\"], [\"style\", \"visibility: hidden;\", 4, \"ngIf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [1, \"ion-justify-content-center\"], [\"size-lg\", \"4\", \"size-xs\", \"8\"], [\"type\", \"submit\", \"color\", \"tertiary\", \"expand\", \"full\", \"shape\", \"round\", 3, \"disabled\"], [3, \"ngClass\", \"click\"], [2, \"visibility\", \"hidden\"], [1, \"text-danger\"]],\n    template: function RatingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-content\")(2, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function RatingComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(3, \"ion-list\")(4, \"ion-item\", 1)(5, \"ion-label\", 2);\n        i0.ɵɵtext(6, \"Calificaci\\u00F3n\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"ion-item\", 1);\n        i0.ɵɵtemplate(8, RatingComponent_i_8_Template, 1, 5, \"i\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ion-item\")(10, \"ion-label\", 4);\n        i0.ɵɵtext(11, \"Comentario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"ion-input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 6);\n        i0.ɵɵtemplate(14, RatingComponent_small_14_Template, 2, 0, \"small\", 7);\n        i0.ɵɵtemplate(15, RatingComponent_small_15_Template, 4, 0, \"small\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-row\", 9)(17, \"ion-col\", 10)(18, \"ion-button\", 11);\n        i0.ɵɵtext(19);\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.ratingForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ratingOptions);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.comment.pristine || ctx.comment.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.comment.dirty && ctx.comment.hasError(\"required\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", ctx.ratingForm.invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.data ? \"Actualizar\" : \"Guardar\", \" \");\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.IonButton, i3.IonCard, i3.IonCardContent, i3.IonCol, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonRow, i3.TextValueAccessor, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\"i[_ngcontent-%COMP%]{cursor:pointer;font-size:20px!important;margin-right:5px;color:#ffca33;opacity:.8}i[_ngcontent-%COMP%]:hover{opacity:1}.rating-selected[_ngcontent-%COMP%]{font-size:30px!important;opacity:1}\"]\n  });\n  return RatingComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}